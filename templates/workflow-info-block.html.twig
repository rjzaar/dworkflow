{#
/**
 * @file
 * Template for displaying workflow information as a field.
 *
 * Available variables:
 * - workflow: The workflow list entity.
 * - node: The node entity.
 */
#}
<div class="workflow-info-block">
  <div class="workflow-info-header">
    <h4>{{ 'Workflow'|t }}: {{ workflow.label }}</h4>
  </div>

  <div class="workflow-info-content">
    {% if workflow.description %}
      <div class="workflow-info-description">
        {{ workflow.description }}
      </div>
    {% endif %}

    {% set assigned_users = workflow.getAssignedUsers() %}
    {% if assigned_users is not empty %}
      <div class="workflow-info-section">
        <strong>{{ 'Assigned Users:'|t }}</strong>
        <ul class="workflow-info-list">
          {% for uid in assigned_users %}
            {% set user = drupal_entity('user', uid) %}
            {% if user %}
              <li>{{ user.getDisplayName() }}</li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% set assigned_groups = workflow.getAssignedGroups() %}
    {% if assigned_groups is not empty %}
      <div class="workflow-info-section">
        <strong>{{ 'Assigned Groups:'|t }}</strong>
        <ul class="workflow-info-list">
          {% for gid in assigned_groups %}
            {% set group = drupal_entity('group', gid) %}
            {% if group %}
              <li>{{ group.label }}</li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% set resource_tags = workflow.getResourceTags() %}
    {% if resource_tags is not empty %}
      <div class="workflow-info-section">
        <strong>{{ 'Resource Locations:'|t }}</strong>
        <ul class="workflow-info-list">
          {% for tid in resource_tags %}
            {% set term = drupal_entity('taxonomy_term', tid) %}
            {% if term %}
              <li>{{ term.name }}</li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% set destination_tags = workflow.getDestinationTags() %}
    {% if destination_tags is not empty %}
      <div class="workflow-info-section workflow-info-section--destinations">
        <strong>{{ 'Destination Locations:'|t }}</strong>
        <ul class="workflow-info-list workflow-info-list--destinations">
          {% for tid in destination_tags %}
            {% set term = drupal_entity('taxonomy_term', tid) %}
            {% if term %}
              <li class="destination-badge destination-badge--{{ term.name|lower }}">
                <span class="destination-icon">üìç</span>
                {{ term.name }}
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
</div>
